{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\liron\\\\Desktop\\\\FullStack\\\\Training\\\\todo_list_training\\\\ToDo_List_testing\\\\Client\\\\src\\\\Cmps\\\\ToDoList\\\\ToDoListCmp.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport initial_data from \"../../initialData\";\nimport Column_cmp from \"./Column_cmp\";\nimport { DragDropContext } from \"react-beautiful-dnd\";\nimport { useState, useEffect } from \"react\";\nimport ToolBar from \"./ToolBar\";\nimport Requests from \"../../Functions/Requests\";\nimport ColumnCmp from \"./ColumnCmp\";\nimport CreateTask from \"./CreateTask\";\nexport default function ToDoListCmp() {\n  _s();\n\n  const [tasks_list, setTasksList] = useState(\"\");\n  const [openCreateTask, setOpenCreateTask] = useState(false);\n\n  const filter = status => {\n    if (tasks_list) {\n      let test = tasks_list.filter(task => task.status === status);\n      return test;\n    }\n  };\n\n  const status_lists = {\n    todo: filter(\"todo\"),\n    in_pragress: filter(\"in_pragress\"),\n    done: filter(\"done\")\n  };\n  let data_user = JSON.parse(localStorage.getItem(\"data_user\"));\n  const user_id = data_user[\"user_id\"];\n  const user_name = data_user[\"user_name\"];\n  useEffect(() => {\n    async function tasks_list_useEffect() {\n      Requests.get_task_list(user_id).then(res => {\n        setTasksList(res.data.tasks_list);\n      });\n    }\n\n    tasks_list_useEffect();\n  }, []);\n\n  const onDragEnd = result => {\n    const {\n      destination,\n      source,\n      draggableId\n    } = result;\n\n    if (!destination) {\n      return;\n    }\n\n    if (destination.droppableId == source.droppableId && destination.index == source.index) {\n      return;\n    }\n\n    const start = source.droppableId;\n    const finish = destination.droppableId;\n\n    if (start === finish) {\n      console.log(\"djjddd\", status_lists[start]);\n      const tasks_status_list = status_lists[start];\n      const tasks_not_status_list = tasks_list.filter(task => task.status != start); // const tasks_not_status_list = tasks_list.filter(\n      //   (task) => task.status != start\n      // );\n      // console.log(Object.values(status_lists));\n\n      console.log(status_lists);\n      status_lists.map(t => {\n        console.log(t);\n      }); // if (start === finish) {\n      //   console.log(\"dddd\", status_lists[start]);\n      //   const tasks_status_list = tasks_list.filter(\n      //     (task) => task.status === start\n      //   );\n      //   const tasks_not_status_list = tasks_list.filter(\n      //     (task) => task.status != start\n      //   );\n\n      const element = tasks_status_list[source.index];\n      tasks_status_list.splice(source.index, 1);\n      tasks_status_list.splice(destination.index, 0, element);\n      setTasksList(tasks_not_status_list.concat(tasks_status_list)); // setTasksList(tasks_not_status_list.concat(tasks_status_list));\n\n      return;\n    }\n  };\n\n  let data_cmp = [{\n    title: \"TODO\",\n    status: \"todo\"\n  }, {\n    title: \"IN PROGERESS\",\n    status: \"in_pragress\"\n  }, {\n    title: \"DONE\",\n    status: \"done\"\n  }];\n  return /*#__PURE__*/_jsxDEV(DragDropContext, {\n    onDragEnd: onDragEnd,\n    children: [/*#__PURE__*/_jsxDEV(ToolBar, {\n      user_name: user_name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), openCreateTask ? /*#__PURE__*/_jsxDEV(CreateTask, {\n      state_function: {\n        setTasksList: setTasksList,\n        setOpenCreateTask: setOpenCreateTask\n      },\n      user_id: user_id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this) : \"\", /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        setOpenCreateTask(true);\n      },\n      children: \"add\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pro\",\n      children: data_cmp.map((data_column, index) => /*#__PURE__*/_jsxDEV(ColumnCmp, {\n        delete: async task_id => {\n          Requests.delete_task(task_id);\n          let new_tasks_list = tasks_list.filter(task => task.task_id !== task_id);\n          setTasksList(new_tasks_list);\n        },\n        move: (task_id, status_task) => {\n          Requests.post_value(\"/move\", {\n            task_id: task_id,\n            status_task: status_task\n          }).then(res => {\n            const task_found = tasks_list.find(task => task.task_id === task_id);\n            task_found.status = res.data.move_to_status;\n            setTasksList(task_found => [...task_found]);\n          });\n        },\n        class_name: `${data_column.status} column`,\n        status: data_column.status,\n        title: data_column.title,\n        number: index,\n        tasks_list: status_lists[data_column.status]\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ToDoListCmp, \"6up4t67LPhL63Um3W/P+Vd49Vkc=\");\n\n_c = ToDoListCmp;\n\nvar _c;\n\n$RefreshReg$(_c, \"ToDoListCmp\");","map":{"version":3,"sources":["C:/Users/liron/Desktop/FullStack/Training/todo_list_training/ToDo_List_testing/Client/src/Cmps/ToDoList/ToDoListCmp.jsx"],"names":["React","initial_data","Column_cmp","DragDropContext","useState","useEffect","ToolBar","Requests","ColumnCmp","CreateTask","ToDoListCmp","tasks_list","setTasksList","openCreateTask","setOpenCreateTask","filter","status","test","task","status_lists","todo","in_pragress","done","data_user","JSON","parse","localStorage","getItem","user_id","user_name","tasks_list_useEffect","get_task_list","then","res","data","onDragEnd","result","destination","source","draggableId","droppableId","index","start","finish","console","log","tasks_status_list","tasks_not_status_list","map","t","element","splice","concat","data_cmp","title","data_column","task_id","delete_task","new_tasks_list","status_task","post_value","task_found","find","move_to_status"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport initial_data from \"../../initialData\";\r\nimport Column_cmp from \"./Column_cmp\";\r\nimport { DragDropContext } from \"react-beautiful-dnd\";\r\nimport { useState, useEffect } from \"react\";\r\nimport ToolBar from \"./ToolBar\";\r\nimport Requests from \"../../Functions/Requests\";\r\nimport ColumnCmp from \"./ColumnCmp\";\r\nimport CreateTask from \"./CreateTask\";\r\n\r\nexport default function ToDoListCmp() {\r\n  const [tasks_list, setTasksList] = useState(\"\");\r\n  const [openCreateTask, setOpenCreateTask] = useState(false);\r\n\r\n  const filter = (status) => {\r\n    if (tasks_list) {\r\n      let test = tasks_list.filter((task) => task.status === status);\r\n      return test;\r\n    }\r\n  };\r\n\r\n  const status_lists = {\r\n    todo: filter(\"todo\"),\r\n    in_pragress: filter(\"in_pragress\"),\r\n    done: filter(\"done\"),\r\n  };\r\n\r\n  let data_user = JSON.parse(localStorage.getItem(\"data_user\"));\r\n  const user_id = data_user[\"user_id\"];\r\n  const user_name = data_user[\"user_name\"];\r\n\r\n  useEffect(() => {\r\n    async function tasks_list_useEffect() {\r\n      Requests.get_task_list(user_id).then((res) => {\r\n        setTasksList(res.data.tasks_list);\r\n      });\r\n    }\r\n    tasks_list_useEffect();\r\n  }, []);\r\n\r\n  const onDragEnd = (result) => {\r\n    const { destination, source, draggableId } = result;\r\n\r\n    if (!destination) {\r\n      return;\r\n    }\r\n\r\n    if (\r\n      destination.droppableId == source.droppableId &&\r\n      destination.index == source.index\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    const start = source.droppableId;\r\n    const finish = destination.droppableId;\r\n\r\n    if (start === finish) {\r\n      console.log(\"djjddd\", status_lists[start]);\r\n\r\n      const tasks_status_list = status_lists[start];\r\n\r\n      const tasks_not_status_list = tasks_list.filter(\r\n        (task) => task.status != start\r\n      );\r\n\r\n      // const tasks_not_status_list = tasks_list.filter(\r\n      //   (task) => task.status != start\r\n      // );\r\n\r\n\r\n\r\n      // console.log(Object.values(status_lists));\r\n      console.log(status_lists);\r\n      status_lists.map((t)=>{console.log(t)})\r\n\r\n      // if (start === finish) {\r\n      //   console.log(\"dddd\", status_lists[start]);\r\n\r\n      //   const tasks_status_list = tasks_list.filter(\r\n      //     (task) => task.status === start\r\n      //   );\r\n\r\n      //   const tasks_not_status_list = tasks_list.filter(\r\n      //     (task) => task.status != start\r\n      //   );\r\n\r\n      const element = tasks_status_list[source.index];\r\n      tasks_status_list.splice(source.index, 1);\r\n      tasks_status_list.splice(destination.index, 0, element);\r\n\r\n      setTasksList(tasks_not_status_list.concat(tasks_status_list));\r\n\r\n      // setTasksList(tasks_not_status_list.concat(tasks_status_list));\r\n      return;\r\n    }\r\n  };\r\n\r\n  let data_cmp = [\r\n    { title: \"TODO\", status: \"todo\" },\r\n    {\r\n      title: \"IN PROGERESS\",\r\n      status: \"in_pragress\",\r\n    },\r\n    { title: \"DONE\", status: \"done\" },\r\n  ];\r\n\r\n  return (\r\n    <DragDropContext onDragEnd={onDragEnd}>\r\n      <ToolBar user_name={user_name} />\r\n      {openCreateTask ? (\r\n        <CreateTask\r\n          state_function={{\r\n            setTasksList: setTasksList,\r\n            setOpenCreateTask: setOpenCreateTask,\r\n          }}\r\n          user_id={user_id}\r\n        />\r\n      ) : (\r\n        \"\"\r\n      )}\r\n      <button\r\n        onClick={() => {\r\n          setOpenCreateTask(true);\r\n        }}\r\n      >\r\n        add\r\n      </button>\r\n\r\n      <div className=\"pro\">\r\n        {data_cmp.map((data_column, index) => (\r\n          <ColumnCmp\r\n            delete={async (task_id) => {\r\n              Requests.delete_task(task_id);\r\n              let new_tasks_list = tasks_list.filter(\r\n                (task) => task.task_id !== task_id\r\n              );\r\n              setTasksList(new_tasks_list);\r\n            }}\r\n            move={(task_id, status_task) => {\r\n              Requests.post_value(\"/move\", {\r\n                task_id: task_id,\r\n                status_task: status_task,\r\n              }).then((res) => {\r\n                const task_found = tasks_list.find(\r\n                  (task) => task.task_id === task_id\r\n                );\r\n                task_found.status = res.data.move_to_status;\r\n                setTasksList((task_found) => [...task_found]);\r\n              });\r\n            }}\r\n            class_name={`${data_column.status} column`}\r\n            status={data_column.status}\r\n            title={data_column.title}\r\n            key={index}\r\n            number={index}\r\n            tasks_list={status_lists[data_column.status]}\r\n          />\r\n        ))}\r\n      </div>\r\n    </DragDropContext>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}